<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background:#f0f8ff; }
  table { width:100%; border-collapse: collapse; margin-top:20px; }
  th, td { border:1px solid #ccc; padding:10px; text-align:left; }
  th { background:#006699; color:white; }
  a { color:#006699; text-decoration:none; }
  a:hover { text-decoration:underline; }
</style>
</head>
<body>

<h2>Admin Panel - Submitted Projects</h2>
<table id="projectsTable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Project Name</th>
      <th>Description</th>
      <th>File Link</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAGI7QWpTXTjoheA5jjlJROyZBq_wR-OnY",
    authDomain: "sdg17-website.firebaseapp.com",
    projectId: "sdg17-website",
    storageBucket: "sdg17-website.firebasestorage.app",
    messagingSenderId: "744397696586",
    appId: "1:744397696586:web:f43c0146448a4abfce40b3",
    measurementId: "G-QD03MERFRN"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const tbody = document.querySelector("#projectsTable tbody");

  db.collection('projects').orderBy('timestamp', 'desc').onSnapshot(snapshot => {
    tbody.innerHTML = '';
    snapshot.forEach(doc => {
      const data = doc.data();
      const row = `<tr>
        <td>${data.name}</td>
        <td>${data.email}</td>
        <td>${data.projectName}</td>
        <td>${data.description}</td>
        <td><a href="${data.fileLink}" target="_blank">View File</a></td>
      </tr>`;
      tbody.innerHTML += row;
    });
  });
</script>

</body>
</html>
